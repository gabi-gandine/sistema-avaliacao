<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Responder Avaliação</title>
    <style>
        .questao { margin-bottom: 2rem; padding: 1.5rem; border: 1px solid #e0e0e0; border-radius: 8px; }
        .opcao { margin: 0.5rem 0; padding: 0.5rem; }
        .enunciado { font-weight: bold; margin-bottom: 1rem; font-size: 1.1em; }
        .tipo-questao { color: #666; font-style: italic; margin-bottom: 0.5rem; }
        .text-input, .number-input, .date-input { 
            width: 100%; padding: 0.5rem; margin: 0.5rem 0; 
            border: 1px solid #ccc; border-radius: 4px; 
        }
        .required { color: red; }
        body { 
            font-family: 'Segoe UI', Arial, sans-serif; 
            margin: 0; 
            padding: 20px; 
            background-color: #f4f4f9; 
            color: #333;
        }

        .container { 
            max-width: 800px; 
            margin: 30px auto; 
            background: white; 
            padding: 40px; 
            border-radius: 8px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
        }

        .header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            border-bottom: 2px solid #28a745; 
            padding-bottom: 15px; 
            margin-bottom: 30px; 
        }
        .btn-add {
            background-color: #28a745;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            height: 42px; 
        }
        .btn-add:hover { background-color: #218838; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div>
                <h1 th:text="${avaliacao.titulo}">Título da Avaliação</h1>
                <p class="subtitle" th:text="${avaliacao.descricao}">Descrição da avaliação</p>
            </div>
            <a th:href="@{/aluno/dashboard}" class="back-link">← Voltar ao Dashboard</a>
        </div>
        <form action="#" 
              th:object="${avaliacao}" method="post">
            
            <div th:each="questao : ${avaliacao.questoes}">
                <div class="questao" th:classappend="${questao.obrigatoria} ? 'required-border'">
                    
                    <!-- Question header -->
                    <div class="enunciado">
                        <span th:text="'Questão ' + (${questao.ordem}) + ': ' + ${questao.texto}"></span>
                        <span th:if="${questao.obrigatoria}" class="required"> *</span>
                    </div>
                    
                    <div class="tipo-questao" th:text="${'Tipo: ' + questao.tipo}"></div>
                    
                    <!-- Hidden field for question ID -->
                    <input type="hidden" th:name="|questaoId|" th:value="${questao.id}">
                    <input type="hidden" th:name="|tipoQuestao|" th:value="${questao.tipo}">
                    
                    <!-- Multiple Choice Questions -->
                    <div th:if="${questao.tipo.name() == 'MULTIPLA_ESCOLHA_UNICA'}">
                        <div th:each="opcao : ${questao.opcoes}" class="opcao">
                            <input type="radio" 
                                   th:name="|opcaoSelecionadaId|"
                                   th:value="${opcao.id}"
                                   th:id="|opcao_${questao.id}_${opcao.id}|"
                                   th:required="${questao.obrigatoria}">
                            <label th:for="|opcao_${questao.id}_${opcao.id}|" 
                                   th:text="${opcao.texto}">Texto da opção</label>
                        </div>
                    </div>
                    
                     <!-- Multiple Choice Questions -->
                    <div th:if="${questao.tipo.name() == 'MULTIPLA_ESCOLHA_MULTIPLA'}">
                        <div th:each="opcao : ${questao.opcoes}" class="opcao">
                            <input type="checkbox" 
                                   th:name="|opcaoSelecionadaId|"
                                   th:value="${opcao.id}"
                                   th:id="|opcao_${questao.id}_${opcao.id}|"
                                   th:required="${questao.obrigatoria}">
                            <label th:for="|opcao_${questao.id}_${opcao.id}|" 
                                   th:text="${opcao.texto}">Texto da opção</label>
                        </div>
                    </div>
                    
                    <!-- Text Input Questions -->
                    <div th:if="${questao.tipo.name() == 'ABERTA'}">
                        <textarea th:name="|textoResposta|"
                            class="text-input"
                            th:placeholder="'Digite sua resposta aqui'"
                            th:required="${questao.obrigatoria}"
                            rows="4">
                        </textarea>
                    </div>
                    
                </div>
            </div>
            
            <button type="submit" class="btn-add">Enviar Respostas</button>
        </form>
    </div>
</body>
</html>